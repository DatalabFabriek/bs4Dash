{"version":3,"sources":["accordions-binding.js","cards.js","controlbar.js","feedbacks.js","leftSidebar.js","miscellaneous.js","navbar.js","output-bindings.js","tabs.js","userMessages.js"],"names":["accordionBinding","Shiny","InputBinding","$","extend","find","scope","getValue","el","activeItem","index","setValue","value","removeClass","children","eq","addClass","click","trigger","receiveMessage","data","this","subscribe","callback","on","e","closest","hasClass","unsubscribe","off","inputBindings","register","validStatuses","validStatusesPlus","cardBinding","config","parent","id","JSON","parse","html","visible","isCollapsed","display","css","isMaximized","hide","show","collapsible","collapsed","closable","maximizable","maximized","status","solidHeader","background","width","height","_updateWidth","o","n","toggleClass","action","isUserCard","isSocialCard","options","hasOwnProperty","title","newTitle","parseHTML","tools","replaceWith","insertAfter","remove","gradient","prepend","length","append","insertBefore","cond","oldClass","newClass","indexOf","oldBgClass","newBgClass","header","undefined","stringify","CardWidget","setTimeout","event","cardSidebarBinding","initialize","transition","attr","parseInt","closeTranslationRate","contacts","openTranslationRate","transform","cardWrapper","self","target","currentTarget","showToast","controlbarToast","document","Toasts","close","autohide","delay","window","pinned","$pinIcon","init","controlbarBinding","controlbarOpen","ControlSidebar","addCustomMessageHandler","message","tooltipTarget","selector","tooltip","console","log","popoverTarget","popover","alertTarget","alertCl","alertTag","iconType","closeButton","titleTag","contentTag","elevation","warn","content","setInputValue","priority","alertId","alert","ensureActivatedTab","$tablinks","$startTab","filter","first","adminlte","Treeview","_jQueryInterface","call","tab","deactivateOtherTabs","not","parents","$obj","inputBinding","$menu","tabItemInputBinding","each","_getTabName","anchor","sidebarBinding","PushMenu","sidebarmenuExpandedInputBinding","$open","prev","$navbar","unbindAll","bindingNames","binding","bindAll","navbarRight","$slideToTop","position","bottom","right","color","font-size","line-height","text-align","background-color","cursor","border-radius","z-index","opacity","scroll","scrollTop","is","fadeIn","fadeOut","animate","$help_switch_checkbox","type","class","$help_switch_container","one","getNavbarColor","navbar_all_colors","search","navbar_dark_skins","concat","$dark_mode_checkbox","newNavbarColor","split","trim","replace","updateNavbarTheme","prop","$dark_mode_icon","$dark_mode_container","hover","border-color","border-style","$main_header","forEach","match","sidebarCl","sidebar_skins","updateSidebarTheme","sidebar_class","$sidebar","skin","accent_colors","updateAccentsTheme","accent_class","$body","controlbarCl","noControlbar","disableControlbar","controlbarSlide","disableSidebar","menuOutputBinding","OutputBinding","onValueError","err","renderError","renderValue","dependencies","deps","$html","renderHtml","className","initializeInputs","outputBindings","bootstrapTabInputBinding","success","getState","text","body","authorWrapper","dateWrapper","author","date","image","newMessageWrapper","newMessage","d","Date","month","getMonth","day","getDate","today","getFullYear"],"mappings":"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","file":"bs4Dash.min.js","sourceRoot":"../../bs4Dash-build","sourcesContent":["// This code creates an input binding for the accordion component\nvar accordionBinding = new Shiny.InputBinding();\n\n$.extend(accordionBinding, {\n  find: function(scope) {\n    return $(scope).find(\".accordion\");\n  },\n  // Given the DOM element for the input, return the value\n  getValue: function(el) {\n    // active is given by the setValue method\n    var activeItem = $(el).find(\".active\").index() + 1;\n    if (activeItem === 0) return;\n    // returns the index of the active item from the R point of view. It is possible\n    // that no item is shown at start. In this case,  NULL is returned\n    return activeItem;\n  },\n  \n  setValue: function(el, value) {\n    // remove active class from all other panels\n    $(el).find(\".active\").removeClass(\"active\");\n    \n    // add active class to current panel\n    $(el).children()\n     .eq(value - 1)\n     .addClass(\"active\");\n    \n    // click on the header to trigger a collapse\n    $(el)\n     .children()\n     .eq(value - 1)\n     .find('[data-toggle=\"collapse\"]')\n     .click();\n     \n     // trigger change to tell Shiny to update the value\n     $(el).trigger(\"change\");\n  },\n\n  // see updateAccordion\n  receiveMessage: function(el, data) {\n    this.setValue(el, data);\n  },\n\n  subscribe: function(el, callback) {\n    // cf setValue\n    $(el).on(\"change\", function(e) {\n      callback();\n    });\n    \n    // manual click will update\n    $(el).find('[data-toggle=\"collapse\"]').on(\"click\", function(e) {\n      if (!$(this).closest(\".card\").hasClass(\"active\")) {\n        $(el).find(\".active\").removeClass(\"active\");\n      } \n      $(this).closest(\".card\").addClass(\"active\");\n      callback();\n    });\n  },\n\n  unsubscribe: function(el) {\n    $(el).off(\".accordionBinding\");\n  }\n});\n\nShiny.inputBindings.register(accordionBinding, \"accordion-input\");","// Buttons valid colors are part of statuses\nconst validStatuses = [\"primary\", \"secondary\", \"success\", \"info\", \"warning\", \"danger\"];\n// Cards may have 6 additional statuses\nconst validStatusesPlus = [\n  \"dark\", \n  \"white\", \n  \"lightblue\", \n  \"navy\",\n  \"orange\",\n  \"fuchsia\",\n  \"purple\",\n  \"indigo\",\n  \"gray\",\n  \"gray-dark\",\n  \"pink\",\n  \"maroon\",\n  \"teal\",\n  \"lime\",\n  \"olive\"\n];\n\n// Input binding\nvar cardBinding = new Shiny.InputBinding();\n\n$.extend(cardBinding, {\n\n  find: function (scope) {\n    return $(scope).find(\".card\");\n  },\n\n  // Given the DOM element for the input, return the value\n  getValue: function (el) {\n    var config = $(el).parent().find(\"script[data-for='\" + el.id + \"']\");\n    config = JSON.parse(config.html());\n\n    var isCollapsed = $(el).hasClass('collapsed-card');\n    var display = $(el).css('display');\n    var isMaximized = $(el).hasClass('maximized-card');\n\n    var visible;\n    if (display === \"none\") {\n      visible = false;\n    } else {\n      visible = true;\n    }\n\n    // toggle collapse button when maximized\n    if (isMaximized) {\n      $(el).find(\"[data-card-widget = 'collapse']\").hide();\n    } else {\n      $(el).find(\"[data-card-widget = 'collapse']\").show();\n    }\n\n    return {\n      collapsible: config.collapsible,\n      collapsed: isCollapsed,\n      closable: config.closable,\n      visible: visible,\n      maximizable: config.maximizable,\n      maximized: isMaximized,\n      status: config.status,\n      solidHeader: config.solidHeader,\n      background: config.background,\n      width: config.width,\n      height: config.height\n    }; // this will be a list in R\n  },\n  _updateWidth: function (el, o, n) {\n    $(el).parent().toggleClass(\"col-sm-\" + o);\n    $(el).parent().addClass(\"col-sm-\" + n);\n    // trigger resize so that output resize\n    $(el).trigger('resize');\n  },\n\n  setValue: function (el, value) {\n\n    var config = $(el).parent().find(\"script[data-for='\" + el.id + \"']\");\n    config = JSON.parse(config.html());\n\n    if (value.action === \"update\") {\n      var isUserCard = $(el).hasClass('user-card');\n      var isSocialCard = $(el).hasClass('social-card');\n      \n      if (value.options.hasOwnProperty(\"title\")) {\n        if (value.options.title !== config.title) {\n          var newTitle;\n          if (typeof value.options.title !== \"string\") {\n            newTitle = $.parseHTML(value.options.title[0]);\n          } else {\n            newTitle = $.parseHTML(value.options.title);\n          }\n\n          var tools = $(el).find(\".card-tools\");\n          // social box\n          if (isSocialCard) {\n            $(el)\n              .find(\".user-block\")\n              .replaceWith($(newTitle));\n          } else if (isUserCard) {\n            // handle 2 cards types\n            if (typeof value.options.title === \"string\") {\n              // don't take newTitle[1] (contains some text)\n              newTitle = [newTitle[0], newTitle[2]];\n              // change widget-use class\n              $(el)\n                .removeClass(\"widget-user-2\")\n                .addClass(\"widget-user\");\n              // insert header and image after\n              $(el)\n                .find(\".widget-user-header\")\n                .replaceWith($(newTitle[0]));\n              $(newTitle[1]).insertAfter($(el).find(\".widget-user-header\"));\n            } else {\n              $(el)\n                .removeClass(\"widget-user\")\n                .addClass(\"widget-user-2\");\n              // remove old user inage if old type was 1\n              $(el)\n                .find(\".widget-user-image\")\n                .remove();\n              $(el)\n                .find(\".widget-user-header\")\n                .replaceWith($(newTitle));\n                \n              if (value.options.status !== null) {\n                if (value.options.gradient) {\n                  $(el).find('.widget-user-header').addClass('bg-gradient-', status);\n                } else {\n                  $(el).find('.widget-user-header').addClass('bg-', status);\n                }\n              }\n            }\n            // add tools as first child of widget-user-header\n            $(el)\n              .find(\".widget-user-header\")\n              .prepend($(tools));\n          } else {\n            if (!$(newTitle).hasClass(\"card-title\"))\n              $(newTitle).addClass(\"card-title\");\n            $(el)\n              .find(\".card-title\")\n              .replaceWith($(newTitle));\n          }\n          config.title = value.options.title;\n        }\n      }\n      \n      if (value.options.hasOwnProperty(\"collapsible\")) {\n        if (value.options.collapsible !== config.collapsible) {\n          if (!value.options.collapsible) {\n            $(el).find('[data-card-widget = \"collapse\"]').remove();\n            config.collapsible = false;\n          } else {\n            // only add if no collapsible\n            if ($(el).find('[data-card-widget = \"collapse\"]').length === 0) {\n              $(el)\n                .find(\".card-tools.float-right\")\n                .prepend($('<button class=\"btn btn-tool btn-sm\" data-card-widget=\"collapse\"><i class=\"fa fa-minus\"></i></button>'));\n              config.collapsible = true;\n            }\n          }\n        }\n      }\n      \n      if (value.options.hasOwnProperty(\"closable\")) {\n        if (value.options.closable !== config.closable) {\n          if (!value.options.closable) {\n            $(el).find('[data-card-widget = \"remove\"]').remove();\n            config.closable = false;\n          } else {\n            if ($(el).find('[data-card-widget = \"remove\"]').length === 0) {\n              // Remove goes between collapse and maximize...\n              if ($(el).find('[data-card-widget = \"maximize\"]').length === 0) {\n                $(el)\n                  .find(\".card-tools.float-right\")\n                  .append($('<button class=\"btn btn-tool btn-sm\" data-card-widget=\"remove\"><i class=\"fa fa-times\"></i></button>'));\n              } else {\n                $('<button class=\"btn btn-tool btn-sm\" data-card-widget=\"remove\"><i class=\"fa fa-times\"></i></button>')\n                  .insertBefore($(el).find('[data-card-widget = \"maximize\"]'));\n              }\n              config.closable = true;\n            }\n          }\n        }\n      }\n\n      if (value.options.hasOwnProperty(\"maximizable\")) {\n        if (value.options.maximizable !== config.maximizable) {\n          if (!value.options.maximizable) {\n            $(el).find('[data-card-widget = \"maximize\"]').remove();\n            config.maximizable = false;\n          } else {\n            if ($(el).find('[data-card-widget = \"maximize\"]').length === 0) {\n              $(el)\n                .find(\".card-tools.float-right\")\n                .append($('<button class=\"btn btn-tool btn-sm\" data-card-widget=\"maximize\"><i class=\"fa fa-expand\"></i></button>'));\n              config.maximizable = true;\n            }\n          }\n        }\n      }\n      \n      if (value.options.hasOwnProperty(\"solidHeader\")) {\n        // only update if config an new value are different\n        if (!isSocialCard && !isUserCard) {\n          if (\n            value.options.solidHeader !== config.solidHeader &&\n            $(el).hasClass(\"card-outline\")\n          ) {\n            $(el).removeClass(\"card-outline\");\n            config.solidHeader = true;\n          } else {\n            if (!$(el).hasClass(\"card-outline\") && !value.options.solidHeader) {\n              var cond = config.status || value.options.status;\n              // solidheader cannot be removed if status and background exist or if status is null\n              if (!(value.options.background && cond)) {\n                $(el).addClass(\"card-outline\");\n                config.solidHeader = false;\n              } else if (\n                value.options.background === null &&\n                !(config.background && cond)\n              ) {\n                $(el).addClass(\"card-outline\");\n                config.solidHeader = false;\n              }\n            } else if ($(el).hasClass(\"card-outline\")) {\n              var cond = config.status || value.options.status;\n              // solidheader cannot be removed if status and background exist or if status is null\n              if (value.options.background && cond) {\n                $(el).removeClass(\"card-outline\");\n                config.solidHeader = true;\n              } else if (config.background && cond) {\n                $(el).removeClass(\"card-outline\");\n                config.solidHeader = false;\n              }\n            }\n          }\n        }\n      }\n      \n      // To remove status explicitly set status = NULL in updateBox. Don't apply\n      // to socialBox in AdminLTE2!!!\n      if (value.options.hasOwnProperty(\"status\")) {\n        if (!isSocialCard) {\n          if (value.options.status !== config.status) {\n            var oldClass, newClass;\n            // If there was a status and the user decide to remove any status\n            if (value.options.status === null && config.status !== null) {\n              if (!isUserCard) $(el).removeClass(\"card-\" + config.status);\n              // add class card-outline for better render (status = NULL)\n              // renders with grey border which is not nice\n              if ($(el).hasClass(\"card-outline\") && !isUserCard) {\n                $(el).addClass(\"card-outline\");\n              }\n\n              // Apply new background color to buttons if any\n              if (value.options.background) {\n                var background = value.options.background;\n                if (validStatusesPlus.indexOf(background) > -1) {\n                  $(el)\n                    .find(\".btn-tool\")\n                    .addClass(\"bg-\" + background);\n                } else if (validStatuses.indexOf(background) > -1) {\n                  $(el)\n                    .find(\".btn-tool\")\n                    .addClass(\"btn-\" + background);\n                }\n              }\n\n              // in case there is a status and it is not null (indeed we can send null through R)\n            } else if (value.options.status) {\n              // apply new status\n              if (isUserCard) {\n                newClass = \"bg-\"; \n                if (value.options.gradient) {\n                  newClass = newClass + \"gradient-\";\n                }\n                newClass = newClass + value.options.status;\n                $(el)\n                  .find(\".widget-user-header\")\n                  .addClass(newClass);\n              } else {\n                newClass = \"card-\" + value.options.status;\n                $(el).addClass(newClass);\n              }\n              \n              // remove old status, if there was one ...\n              if (config.status) {\n                if (isUserCard) {\n                  oldClass = \"bg-\";\n                  if (config.gradient) {\n                    oldClass = oldClass + \"gradient-\";\n                  }\n                  oldClass = oldClass + config.status;\n                  $(el)\n                    .find(\".widget-user-header\")\n                    .removeClass(oldClass);\n                } else {\n                  oldClass = \"card-\" + config.status;\n                  $(el).removeClass(oldClass);\n                }\n              }\n\n              // Add new color for Buttons. We handle extra statuses in which case\n              // the button class changes. Only if solidHeader\n              if (!$(el).hasClass(\"card-outline\") || isUserCard) {\n                if (isUserCard) {\n                  $(el)\n                    .find(\".btn-tool\")\n                    .addClass(\"bg-\" + value.options.status);\n                } else {\n                  if (validStatusesPlus.indexOf(value.options.status) > -1) {\n                    $(el)\n                      .find(\".btn-tool\")\n                      .addClass(\"bg-\" + value.options.status);\n                  } else if (validStatuses.indexOf(value.options.status) > -1) {\n                    $(el)\n                      .find(\".btn-tool\")\n                      .addClass(\"btn-\" + value.options.status);\n                  }\n                }\n                \n              }\n            }\n\n            // If there was a status or background, we must cleanup the old button status\n            // since status predominate over background. We also handle extra\n            // statuses ...\n            var status;\n            if (config.status || config.background) {\n              // status dominates\n              if (config.status) {\n                status = config.status;\n              } else if (config.background) {\n                status = config.background;\n              }\n\n              if (isUserCard) {\n                $(el)\n                    .find(\".btn-tool\")\n                    .removeClass(\"bg-\" + status);\n              } else {\n                if (validStatusesPlus.indexOf(status) > -1) {\n                  $(el)\n                    .find(\".btn-tool\")\n                    .removeClass(\"bg-\" + status);\n                } else if (validStatuses.indexOf(status) > -1) {\n                  $(el)\n                    .find(\".btn-tool\")\n                    .removeClass(\"btn-\" + status);\n                }\n              }\n            }\n            config.status = value.options.status;\n          }\n        }\n      }\n  \n      // To remove background explicitly set background = NULL in updateBox\n      if (value.options.hasOwnProperty(\"background\")) {\n        if (value.options.background !== config.background) {\n          var oldBgClass = \"bg-\";\n            newBgClass = oldBgClass;\n          // don't touch if null\n          if (config.background) {\n            // if gradient, the class has a gradient in between!\n            if (config.gradient) {\n              oldBgClass = oldBgClass + \"gradient-\";\n            }\n            oldBgClass = oldBgClass + config.background;\n            // handle userBox\n            // for which we also have to toggle the header bg color\n            // and the box tools buttons color\n            if (isUserCard && !(config.status || value.options.status)) {\n              var header = $(el).find(\".widget-user-header\");\n              $(header).removeClass(oldBgClass);\n            }\n\n            $(el).removeClass(oldBgClass);\n          }\n          if (value.options.background) {\n            if (config.gradient || value.options.gradient) {\n              newBgClass = newBgClass + \"gradient-\";\n            }\n            newBgClass = newBgClass + value.options.background;\n            if (isUserCard && !(config.status || value.options.status)) {\n              var header = $(el).find(\".widget-user-header\");\n              $(header).addClass(newBgClass);\n            }\n            $(el).addClass(newBgClass);\n          }\n          if (config.gradient !== value.options.gradient &&\n          value.options.gradient !== undefined) {\n            config.gradient = value.options.gradient;\n          }\n          config.background = value.options.background;\n        }\n      }\n      \n      if (value.options.hasOwnProperty(\"width\")) {\n        if (value.options.width !== config.width) {\n          this._updateWidth(el, config.width, value.options.width);\n          config.width = value.options.width;\n        }\n      }\n      \n      if (value.options.hasOwnProperty(\"height\")) {\n        if (value.options.height !== config.height) {\n          if (value.options.height === null) {\n            $(el).find(\".card-body\").css(\"height\", '');\n          } else {\n            $(el).find(\".card-body\").css(\"height\", value.options.height);\n          }\n\n          config.height = value.options.height;\n          // don't need to trigger resize since the output height\n          // is not controlled by the box size ...\n        }\n      }\n      \n\n      // replace the old JSON config by the new one to update the input value \n      $(el).parent().find(\"script[data-for='\" + el.id + \"']\").replaceWith(\n        '<script type=\"application/json\" data-for=\"' + el.id + '\">' + JSON.stringify(config) + '</script>'\n      );\n    } else {\n      if (value != \"restore\") {\n        if ($(el).css('display') != 'none') {\n          $(el).CardWidget(value);\n        }\n      } else {\n        $(el).show();\n        // this is needed so that the last event handler is considered\n        // in the subscribe method. \n        $(el).trigger(\"shown\");\n      }\n    }\n  },\n  receiveMessage: function (el, data) {\n    this.setValue(el, data);\n    $(el).trigger('change');\n  },\n\n  subscribe: function (el, callback) {\n    $(el).on('expanded.lte.cardwidget collapsed.lte.cardwidget', function (e) {\n      // set a delay so that SHiny get the input value when the collapse animation\n      // is finished. \n      setTimeout(\n        function () {\n          callback();\n        }, 500);\n    });\n\n    $(el).on('maximized.lte.cardwidget minimized.lte.cardwidget', function (e) {\n      callback();\n    });\n\n    $(el).on('removed.lte.cardwidget', function (e) {\n      setTimeout(\n        function () {\n          callback();\n        }, 500);\n    });\n    // we need to split removed and shown event since shown is immediate whereas close\n    // takes some time\n    $(el).on('shown.cardBinding', function (e) {\n      callback();\n    });\n\n    // handle change event triggered in the setValue method \n    $(el).on('change.cardBinding', function (event) {\n      setTimeout(function () {\n        callback();\n      }, 500);\n    });\n  },\n\n  unsubscribe: function (el) {\n    $(el).off(\".cardBinding\");\n  }\n});\n\nShiny.inputBindings.register(cardBinding);\n\n\n\n// Card sidebar input binding\nvar cardSidebarBinding = new Shiny.InputBinding();\n$.extend(cardSidebarBinding, {\n  \n  initialize: function(el) {\n    // erase default to avoid seeing moving sidebars on initialization\n  $('.direct-chat-contacts, .direct-chat-messages').css({'transition': 'transform .0s ease-in-out'});\n  \n  var background = $(el).attr('data-background') ? $(el).attr('data-background') : '#343a40';\n    var width = $(el).attr('data-width') ? parseInt($(el).attr('data-width')) : 100;\n    var closeTranslationRate =  100 * 100 / width;\n    var contacts = $(el).closest('.direct-chat').find('.direct-chat-contacts');\n    \n    // apply width and background\n    $(contacts).css({\n      'background': `${background}`,\n      'width': `${width}%`\n    });\n    \n    // If start open, apply openTranslationRate else apply closeTranslationRate ...\n    if ($(el).attr('data-start-open') === \"true\") {\n      var openTranslationRate = closeTranslationRate - 100;\n      $(contacts).css({'transform': `translate(${openTranslationRate}%, 0)`});\n    } else {\n      $(contacts).css({'transform': `translate(${closeTranslationRate}%, 0)`});\n    }\n  \n    // Restore for better transitions\n    setTimeout(function() {\n      $('.direct-chat-contacts, .direct-chat-messages').css({'transition': 'transform .5s ease-in-out'});\n    }, 300);\n  },\n  \n  find: function (scope) {\n    return $(scope).find('[data-widget=\"chat-pane-toggle\"]');\n  },\n\n  // Given the DOM element for the input, return the value\n  getValue: function (el) {\n    var cardWrapper = $(el).closest(\".card\");\n    return $(cardWrapper).hasClass(\"direct-chat-contacts-open\");\n  },\n\n  // see updatebs4Card\n  receiveMessage: function (el, data) {\n    // In theory, adminLTE3 has a builtin function\n    // we could use $(el).DirectChat('toggle');\n    // However, it does not update the related input.\n    // The toggled.lte.directchat event seems to be broken.\n    $(el).trigger('click');\n    $(el).trigger(\"shown\");\n  },\n\n  subscribe: function (el, callback) {\n    var self = this;\n    $(el).on('click', function (e) {\n      var width = $(el).attr('data-width') ? parseInt($(el).attr('data-width')) : 100;\n      var closeTranslationRate =  100 * 100 / width;\n      var openTranslationRate = closeTranslationRate - 100;\n      // set a delay so that Shiny get the input value when the collapse animation\n      // is finished. \n      var target = e.currentTarget;\n      setTimeout(\n        function (e = target) {\n          // apply correct translation rate depending on current state\n          var contacts = $(e).closest('.direct-chat').find('.direct-chat-contacts');\n          if (self.getValue(el)) {\n            $(contacts).css({'transform': `translate(${openTranslationRate}%, 0)`});\n          } else {\n            $(contacts).css({'transform': `translate(${closeTranslationRate}%, 0)`});\n          }\n          callback();\n        }, 10);\n    });\n  },\n\n  unsubscribe: function (el) {\n    $(el).off(\".cardSidebarBinding\");\n  }\n});\n\nShiny.inputBindings.register(cardSidebarBinding);","$(function() {\n  \n  // required to show a toast when the controlbar is pinned \n  // for the first time. Show once since it may be annoying ...\n  var showToast = true;\n  const controlbarToast = () => {\n    if (showToast) {\n      $(document).Toasts('create', {\n        title: 'Controlbar is pinned',\n        close: false,\n        autohide: true,\n        delay: 2000\n      });\n      showToast = false; \n    }\n  };\n\n  // This prevent box content from going outside their container \n  // when the control-bar is on push mode\n  $(\"#controlbar-toggle\").on(\"click\",\n    function() {\n      if ($(\"body\").hasClass(\"control-sidebar-push-slide\")) {\n        $(window).trigger(\"resize\"); \n      }\n  });\n  \n  \n  // The code below hande the click out of the right control bar\n  $(window).click(function(e) { \n    // There is a potential conflict. This function detect any click outside\n    // the controlbar and close if if it is not pinned. Yet, if we click on an action       // button controlling the controlbar state (see updatebs4Controlbar), it is also outside the controlbar so the toggle event will be triggered twice. The controlbar will never close as shown in https://github.com/RinteRface/bs4Dash/issues/110. Below we make sure to leave the function as soon as a click on a button holding the class action button. This is not really a fix but a reasonable workaround.\n    var isActionButton = $(e.target).hasClass(\"action-button\");\n    if (isActionButton) return null;\n      \n    if($(\"aside.control-sidebar\").find(e.target).length === 0) {\n      var pinned = $(\".control-sidebar\").attr(\"data-pin\");\n      if (pinned === \"false\" || pinned === undefined) {\n        $(\"body\").removeClass(\"control-sidebar-slide-open\");  \n        // don't forget to refresh the input binding\n        $(\"#controlbar-toggle\").trigger('collapsed.lte.controlsidebar');\n      }\n    }  \n  });\n  \n  // handle the pin button: toggle data-pin state\n  $(\"#controlbarPin\").on('click', function() {\n    var $pinIcon = $(this).children();\n    $pinIcon.toggleClass(\"fa-rotate-90 fa-lg\");\n    \n    $(\".control-sidebar\").attr(\"data-pin\",\n       $(\".control-sidebar\").attr(\"data-pin\") == \"false\" ? \"true\" : \"false\");\n    // toggle right sidebar control depending on the datapin\n    if ($(\".control-sidebar\").attr(\"data-pin\") === \"true\") {\n      $pinIcon.css(\"color\", \"#007bff\");\n      $(\"#controlbar-toggle\").addClass(\"disabled\");\n      controlbarToast();\n    } else {\n      $(\"#controlbar-toggle\").removeClass(\"disabled\");\n      $pinIcon.css(\"color\", \"\");\n    }\n  });\n\n\nvar init = true;\n\n  // Input binding\n  var controlbarBinding = new Shiny.InputBinding();\n  \n  $.extend(controlbarBinding, {\n  \n    find: function(scope) {\n      return $(scope).find(\".control-sidebar\");\n    },\n  \n    // Given the DOM element for the input, return the value\n    getValue: function(el) {\n      // Handles the pin \n      var controlbarOpen = $(\"body\").hasClass(\"control-sidebar-slide-open\");\n      var pinned = $(el).attr(\"data-pin\") === \"true\";\n      if (controlbarOpen && pinned && init) {\n        $(\"#controlbar-toggle\").addClass(\"disabled\");\n        $(\"#controlbarPin\")\n          .children()\n          .css(\"color\", \"#007bff\");\n        controlbarToast();\n        init = false;\n      }\n      \n      // this handles the case where the controlbar is not collapsed at start\n      var controlbarCollapsed = $(el).attr('data-collapsed');\n      if (controlbarCollapsed === \"false\") {\n        $(\"#controlbar-toggle\").ControlSidebar('toggle');\n        $(el).attr('data-collapsed', \"true\");\n        return true;\n      } else {\n        return $(\"body\").hasClass(\"control-sidebar-slide-open\");\n      }\n    },\n    // see updatebs4Controlbar\n    receiveMessage: function(el, data) {\n      $(\"#controlbar-toggle\").ControlSidebar('toggle');\n    },\n  \n    subscribe: function(el, callback) {\n      $(\"#controlbar-toggle\").on(\"collapsed.lte.controlsidebar expanded.lte.controlsidebar\", function(e) {\n        $(el).trigger('shown');\n        // add a delay so that Shiny get the input value \n        // after the AdminLTE3 animation is finished!\n        setTimeout(\n          function() {\n            callback();\n          }, 10);\n      });\n    },\n  \n    unsubscribe: function(el) {\n      $(el).off(\".controlbarBinding\");\n    }\n  });\n  \n  Shiny.inputBindings.register(controlbarBinding, \"bs4Dash.controlbarBinding\");\n  \n  // handle controlbar overlay\n  var controlbarOverlay = $('.control-sidebar').attr('data-overlay');\n  if (controlbarOverlay === \"false\") {\n    $('body').addClass('control-sidebar-push-slide');\n  }\n\n});","$(function () {\n  // handle tooltip from the server side\n  Shiny.addCustomMessageHandler('create-tooltip', function (message) {\n    var tooltipTarget;\n    if (message.id) {\n      tooltipTarget = '#' + message.id;\n    } else {\n      if (message.selector) {\n        tooltipTarget = message.selector;\n      }\n    }\n    $(tooltipTarget)\n      .addClass('has-tooltip')\n      .tooltip(message.options);\n    console.log(`'Tooltip created for ${tooltipTarget}'`);\n  });\n\n  Shiny.addCustomMessageHandler('remove-tooltip', function (message) {\n    var tooltipTarget = '#' + message;\n\n    // only destroys if popover exists\n    if ($(tooltipTarget).hasClass('has-tooltip')) {\n      $(tooltipTarget)\n        .removeClass('has-tooltip')\n        .tooltip('dispose');\n      console.log(`'Tooltip destroyed for ${tooltipTarget}'`);\n    }\n  });\n\n  // handle popover from the server side\n  Shiny.addCustomMessageHandler('create-popover', function (message) {\n    var popoverTarget;\n    if (message.id) {\n      popoverTarget = '#' + message.id;\n    } else {\n      if (message.selector) {\n        popoverTarget = message.selector;\n      }\n    }\n    // indicate target has popover. This is for removePopover to know\n    // whether the popover exists\n    $(popoverTarget)\n      .addClass('has-popover')\n      .popover(message.options);\n    console.log(`'Popover created for ${popoverTarget}'`);\n  });\n\n\n  Shiny.addCustomMessageHandler('remove-popover', function (message) {\n    var popoverTarget = '#' + message;\n\n    // only destroys if popover exists\n    if ($(popoverTarget).hasClass('has-popover')) {\n      $(popoverTarget)\n        .removeClass('has-popover')\n        .popover('dispose');\n      console.log(`'Popover destroyed for ${popoverTarget}'`);\n    }\n  });\n\n\n  // handle builtin toasts\n  Shiny.addCustomMessageHandler('toast', function (message) {\n    $(document).Toasts('create', message);\n  });\n\n  // Create an alert\n  Shiny.addCustomMessageHandler('create-alert', function (message) {\n    // setup target\n    var alertTarget;\n    if (message.id) {\n      alertTarget = `#${message.id}`;\n    } else {\n      if (message.selector) {\n        alertTarget = message.selector;\n      }\n    }\n\n    // build the tag from options\n    var config = message.options, alertCl, alertTag, iconType, closeButton, titleTag, contentTag;\n    alertCl = 'alert alert-dismissible';\n    if (config.status !== undefined) {\n      alertCl = `${alertCl} alert-${config.status}`;\n    }\n    if (config.elevation !== undefined) {\n      alertCl = `${alertCl} elevation-${config.elevation}`;\n    }\n\n    switch (config.status) {\n      case 'primary': iconType = 'info';\n        break;\n      case 'danger': iconType = 'ban';\n        break;\n      case 'info': iconType = 'info';\n        break;\n      case 'warning': iconType = 'warning';\n        break;\n      case 'success': iconType = 'check';\n        break;\n      default: console.warn(`${config.status} does not belong to allowed statuses!`)\n    }\n\n    if (config.closable) {\n      closeButton = '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">x</button>'\n    }\n\n    titleTag = `<h5><i class=\"icon fa fa-${iconType}\"></i></h5>`\n    contentTag = config.content;\n\n    alertTag = `<div \n      id=\"${message.id}-alert\" \n      class=\"${alertCl}\">\n        ${closeButton}${titleTag}${contentTag}\n    </div>`\n    if (config.width !== undefined) {\n      alertTag = `<div class=\"col-sm-${config.width}\">${alertTag}</div>`\n    }\n\n    // add it to the DOM if no existing alert is found in the anchor\n    if ($(`#${message.id}-alert`).length === 0) {\n      $(alertTarget).append(alertTag);\n      Shiny.setInputValue(message.id, true, { priority: 'event' });\n\n      // add events only after element is inserted\n\n      // callback -> give ability to perform more actions on the Shiny side\n      // once the alert is closed\n      $(`#${message.id}-alert`).on('closed.bs.alert', function () {\n        Shiny.setInputValue(message.id, false, { priority: 'event' });\n      });\n      // Clicking on close button does not trigger any event.\n      // Trigger the closed.bs.alert event.\n      $('[data-dismiss=\"alert\"]').on('click', function () {\n        var alertId = $(this).parent.attr('id');\n        $(`#${alertId}.`).trigger('closed.bs.alert');\n      });\n\n    } else {\n      console.warn(`${alertTarget} already has an alert!`);\n    }\n  });\n\n\n  Shiny.addCustomMessageHandler('close-alert', function (message) {\n    // only closes if element exists\n    if ($(`#${message}-alert`).length > 0) {\n      $(`#${message}-alert`).alert('close');\n    } else {\n      console.warn('Nothing to delete!');\n    }\n  });\n});","// When document is ready, if there is a sidebar menu with no activated tabs,\n// activate the one specified by `data-start-selected`, or if that's not\n// present, the first one.\nvar ensureActivatedTab = function() {\n  // get the selected tabs\n  var $tablinks = $(\".sidebar-menu a[data-toggle='tab']\");\n\n  // If there are no tabs, $startTab.length will be 0.\n  var $startTab = $tablinks.filter(\"[data-start-selected='1']\");\n  if ($startTab.length === 0) {\n    // If no tab starts selected, use the first one, if present\n    $startTab = $tablinks.first();\n  }\n\n  // If there's a `data-start-selected` attribute and we can find a tab with\n  // that name, activate it.\n  if ($startTab.length !== 0) {\n    // This is just in case the user renders the tabs in a renderUI that does not\n    // print immediately in the DOM. We need a bit of a delay before telling which\n    // tab to show ...\n    if ($(\".sidebar-menu\").hasClass(\"bs4Dash-menu-output\")) {\n      setTimeout(function() {\n        // we need to initialize any treeview elements that were not inserted\n        // in the DOM when adminlte was first initialized!\n        adminlte.Treeview._jQueryInterface.call($('[data-widget=\"treeview\"]'), 'init');\n\n        $startTab.tab(\"show\");\n      }, 10);\n    } else {\n      $startTab.tab(\"show\");\n    }\n    \n\n    // This is indirectly setting the value of the Shiny input by setting\n    // an attribute on the html element it is bound to. We cannot use the\n    // inputBinding's setValue() method here because this is called too\n    // early (before Shiny has fully initialized)\n    $(\".sidebarMenuSelectedTabItem\").attr(\n      \"data-value\",\n      $startTab.attr(\"data-value\")\n    );\n  }\n};\n\n// This function handles a special case in the AdminLTE sidebar: when there\n// is a sidebar-menu with items, and one of those items has sub-items, and\n// they are used for tab navigation. Normally, if one of the items is\n// selected and then a sub-item is clicked, both the item and sub-item will\n// retain the \"active\" class, so they will both be highlighted. This happens\n// because they're not designed to be used together for tab panels. This\n// code ensures that only one item will have the \"active\" class.\nvar deactivateOtherTabs = function() {\n  // Find all tab links under sidebar-menu even if they don't have a\n  // tabName (which is why the second selector is necessary)\n  var $tablinks = $(\n    \".sidebar-menu a[data-toggle='tab'],\" + \".sidebar-menu li.has-treeview > a\"\n  );\n\n  // If any other items are active, deactivate them\n  $tablinks.not($(this)).removeClass(\"active\");\n\n  // also manually activate the parent link when the selected item\n  // is part of a treeview. For some reason, this is not done by AdminLTE3...\n  if ($(this).hasClass(\"treeview-link\")) {\n    $(this)\n      .parents(\".has-treeview\")\n      .children()\n      .eq(0)\n      .addClass(\"active\");\n  }\n\n  // Trigger event for the tabItemInputBinding\n  var $obj = $(\".sidebarMenuSelectedTabItem\");\n  var inputBinding = $obj.data(\"shiny-input-binding\");\n  if (typeof inputBinding !== \"undefined\") {\n    inputBinding.setValue($obj, $(this).attr(\"data-value\"));\n    $obj.trigger(\"change\");\n  }\n};\n\n$(function() {\n  // Whenever the sidebar finishes a transition (which it does every time it\n  // changes from collapsed to expanded and vice versa), trigger resize,\n  // so that all outputs are resized.\n  $(\".main-sidebar\").on(\n    \"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend\",\n    function() {\n      $(window).trigger(\"resize\");\n    }\n  );\n\n  $(document).on(\n    \"shown.bs.tab\",\n    '.sidebar-menu a[data-toggle=\"tab\"]',\n    deactivateOtherTabs\n  );\n\n  ensureActivatedTab();\n\n  // Whenever we expand a menuItem (to be expandable, it must have children),\n  // update the value for the expandedItem's input binding (this is the\n  // tabName of the fist subMenuItem inside the menuItem that is currently\n  // expanded)\n  $(document).on(\"click\", \".has-treeview\", function() {\n    var $menu = $(this);\n    // If this menuItem was already open, then clicking on it again,\n    // should trigger the \"hidden\" event, so Shiny doesn't worry about\n    // it while it's hidden (and vice versa).\n    if ($menu.hasClass(\"menu-open\")) $menu.trigger(\"collapsed.lte.treeview\");\n    else if ($menu.hasClass(\".has-treeview\"))\n      $menu.trigger(\"expanded.lte.treeview\");\n\n    // need to set timeout to account for the slideUp/slideDown animation\n    var $obj = $(\".sidebar.shiny-bound-input\");\n    setTimeout(function() {\n      $obj.trigger(\"change\");\n    }, 600);\n  });\n\n  //---------------------------------------------------------------------\n  // tabItemInputBinding\n  // ------------------------------------------------------------------\n  // Based on Shiny.tabItemInputBinding, but customized for tabItems in\n  // bs4Dash, which have a slightly different structure.\n  var tabItemInputBinding = new Shiny.InputBinding();\n  $.extend(tabItemInputBinding, {\n    find: function(scope) {\n      return $(scope).find(\".sidebarMenuSelectedTabItem\");\n    },\n    getValue: function(el) {\n      var value = $(el).attr(\"data-value\");\n      if (value === \"null\") return null;\n      return value;\n    },\n    setValue: function(el, value) {\n      var self = this;\n      var anchors = $(el)\n        .parent(\".sidebar-menu\")\n        .find(\"li:not(.treeview)\")\n        .children(\"a\");\n      anchors.each(function() {\n        // eslint-disable-line consistent-return\n        if (self._getTabName($(this)) === value) {\n          $(this).tab(\"show\");\n          // this make sure that treeview items are open when we\n          // use the updatebs4TabItems function on the server side\n          if ($(this).hasClass(\"treeview-link\")) {\n            if (\n              !$(this)\n                .parents(\".has-treeview\")\n                .hasClass(\"menu-open\")\n            ) {\n              $(this)\n                .parents(\".has-treeview\")\n                .children()\n                .eq(0)\n                .trigger(\"click\");\n            }\n          }\n          $(el).attr(\"data-value\", self._getTabName($(this)));\n          return false;\n        }\n      });\n    },\n    receiveMessage: function(el, data) {\n      if (data.hasOwnProperty(\"value\")) this.setValue(el, data.value);\n    },\n    subscribe: function(el, callback) {\n      // This event is triggered by deactivateOtherTabs, which is triggered by\n      // shown. The deactivation of other tabs must occur before Shiny gets the\n      // input value.\n      $(el).on(\"change.tabItemInputBinding\", function() {\n        callback();\n      });\n    },\n    unsubscribe: function(el) {\n      $(el).off(\".tabItemInputBinding\");\n    },\n    _getTabName: function(anchor) {\n      return anchor.attr(\"data-value\");\n    }\n  });\n\n  Shiny.inputBindings.register(tabItemInputBinding, \"bs4Dash.tabItemInput\");\n\n  //---------------------------------------------------------------------\n  // sidebarInputBinding\n  // ------------------------------------------------------------------\n  // similar to controlbarInputBinding\n  var sidebarBinding = new Shiny.InputBinding();\n\n  $.extend(sidebarBinding, {\n    find: function(scope) {\n      return $(scope).find(\".main-sidebar\");\n    },\n\n    // Given the DOM element for the input, return the value\n    getValue: function(el) {\n      // Warning: we can't look for sidebar-open since this\n      // class is only generated on mobile devices\n      return !$(\"body\").hasClass(\"sidebar-collapse\");\n    },\n\n    // see updatebs4Controlbar\n    receiveMessage: function(el, data) {\n      $(\"[data-widget='pushmenu']\").PushMenu(\"toggle\");\n    },\n\n    subscribe: function(el, callback) {\n      $(\"[data-widget='pushmenu']\").on(\n        \"collapsed.lte.pushmenu.sidebarBinding shown.lte.pushmenu.sidebarBinding\",\n        function(e) {\n          callback();\n        }\n      );\n    },\n\n    unsubscribe: function(el) {\n      $(el).off(\".sidebarBinding\");\n    }\n  });\n\n  Shiny.inputBindings.register(sidebarBinding, \"bs4Dash.sidebarInput\");\n\n  // sidebarmenuExpandedInputBinding\n  // ------------------------------------------------------------------\n  // This keeps tracks of what menuItem (if any) is expanded\n  var sidebarmenuExpandedInputBinding = new Shiny.InputBinding();\n  $.extend(sidebarmenuExpandedInputBinding, {\n    find: function(scope) {\n      // This will also have id=\"sidebarItemExpanded\"\n      return $(scope).find(\".sidebar\");\n    },\n    getValue: function(el) {\n      var $open = $(el)\n        .find(\"li\")\n        .filter(\".menu-open\")\n        .find(\"ul\");\n      if ($open.length === 1) return $open.attr(\"data-expanded\");\n      else return null;\n    },\n    setValue: function(el, value) {\n      // does not work (nothing is printed)\n      var $menuItem = $(el).find(\"[data-expanded='\" + value + \"']\");\n      // This will trigger actions defined by AdminLTE, as well as actions\n      // defined in sidebar.js.\n      $menuItem.prev().trigger(\"click\");\n    },\n    subscribe: function(el, callback) {\n      $(el).on(\"change.sidebarmenuExpandedInputBinding\", function() {\n        callback();\n      });\n    },\n    unsubscribe: function(el) {\n      $(el).off(\".sidebarmenuExpandedInputBinding\");\n    }\n  });\n  Shiny.inputBindings.register(\n    sidebarmenuExpandedInputBinding,\n    \"bs4Dash.sidebarmenuExpandedInputBinding\"\n  );\n\n  // handle fixed sidebar\n  if ($(\".main-sidebar\").attr(\"data-fixed\") === \"true\") {\n    $(\"body\").addClass(\"layout-fixed\");\n    //$('body').Layout('fixLayoutHeight');\n  }\n\n  // toggle sidebar at start depending on the body class\n  var sidebarCollapsed = $(\".main-sidebar\").attr(\"data-collapsed\");\n  if (sidebarCollapsed === \"true\") {\n    // This triggers binding geValue\n    $(\"[data-widget='pushmenu']\").PushMenu(\"toggle\");\n  }\n\n  var sidebarMinified = $(\".main-sidebar\").attr(\"data-minified\");\n  if (sidebarMinified === \"true\") {\n    $(\"body\").addClass(\"sidebar-mini\");\n  }\n});\n","$(function () {\n\n  $navbar = $('.main-header.navbar');\n\n  // Modify the shiny tabsetpanel binding to follow BS4 rules\n  $(document).on('shiny:connected', function (event) {\n    Shiny.unbindAll();\n    $.extend(Shiny\n      .inputBindings\n      .bindingNames['shiny.bootstrapTabInput']\n      .binding, {\n      // do whathever you want to edit existing methods\n      getValue: function (el) {\n        var anchor = $(el).find('li:not(.dropdown)').children('a.active');\n        if (anchor.length === 1)\n          return this._getTabName(anchor);\n\n        return null;\n      }\n    });\n    Shiny.bindAll();\n  });\n\n  // footer has fixed layout?\n  if ($(\".main-footer\").attr(\"data-fixed\") === \"true\") {\n    $(\"body\").addClass(\"layout-footer-fixed\");\n  }\n\n  // add dropdown-menu-right class to correctly open the dropdown to all \n  // navbar rightUi elements\n  var navbarRight = $('.navbar-right').find('.dropdown-menu');\n  $(navbarRight).each(function () {\n    if (!$(this).hasClass('dropdown-menu-right')) {\n      $(this).addClass('dropdown-menu-right');\n    }\n  });\n\n\n  // data toggle collapse icon update\n  $('.user-block [data-toggle=\"collapse\"]').on('click', function () {\n    if ($(this).children('i').hasClass('fa-plus')) {\n      $(this).children('i').attr('class', 'fa fa-minus');\n    } else {\n      $(this).children('i').attr('class', 'fa fa-plus');\n    }\n  });\n\n  // fullscreen toggle\n  if ($('body').attr('data-fullscreen') == 1) {\n    var fullScreenToggle = `<li class=\"nav-item\">\n      <a class=\"nav-link\" data-widget=\"fullscreen\" href = \"#\" role = \"button\" >\n        <i class=\"fas fa-expand-arrows-alt\"></i>\n      </a>\n    </li > `;\n    $(fullScreenToggle).insertBefore($('[data-widget=\"control-sidebar\"]').parent());\n  }\n\n  // slide to top button\n  if ($('body').attr('data-scrollToTop') == 1) {\n    var $slideToTop = $('<div />');\n\n    $slideToTop.html('<i class=\"fa fa-chevron-up\"></i>');\n\n    $slideToTop.css({\n      position: 'fixed',\n      bottom: '20px',\n      right: '25px',\n      width: '40px',\n      height: '40px',\n      color: '#eee',\n      'font-size': '',\n      'line-height': '40px',\n      'text-align': 'center',\n      'background-color': '#222d32',\n      cursor: 'pointer',\n      'border-radius': '5px',\n      'z-index': '99999',\n      opacity: '.7',\n      'display': 'none'\n    });\n\n    $slideToTop.on('mouseenter', function () {\n      $(this).css('opacity', '1');\n    });\n\n    $slideToTop.on('mouseout', function () {\n      $(this).css('opacity', '.7');\n    });\n\n    $('.wrapper').append($slideToTop);\n\n    $(window).scroll(function () {\n      if ($(window).scrollTop() >= 150) {\n        if (!$($slideToTop).is(':visible')) {\n          $($slideToTop).fadeIn(500);\n        }\n      } else {\n        $($slideToTop).fadeOut(500);\n      }\n    });\n\n    $($slideToTop).click(function () {\n      $('html, body').animate({\n        scrollTop: 0\n      }, 500);\n    });\n  }\n  \n  // nav item click also triggers scroll to top\n  $('.main-sidebar .nav-item').on('click', function () {\n    $('html, body').animate({\n      scrollTop: 0\n    }, 0);\n  }); \n\n\n  // tooltip/popover toggle\n  if ($('body').attr('data-help') == 1) {\n    var $help_switch_checkbox = $('<input />', {\n      type: 'checkbox',\n      id: 'help_switch',\n      class: 'custom-control-input'\n    }).on('click', function () {\n      if ($(this).is(':checked')) {\n        $('[data-toggle=\"tooltip\"]').tooltip('enable');\n        $('[data-toggle=\"popover\"]').popover({\n          trigger: 'hover'\n        });\n        $('[data-toggle=\"popover\"]').popover('enable');\n      } else {\n        $('[data-toggle=\"tooltip\"]').tooltip('disable');\n        $('[data-toggle=\"popover\"]').popover('disable');\n      }\n    });\n\n    var $help_switch_container = $('<div />', { class: 'custom-control custom-switch mx-2 mt-2' }).append($help_switch_checkbox).append(`<label class=\"custom-control-label\" for=\"help_switch\"><i class=\"fa fa-question\"></i></label>`);\n    \n    // insert before $('#controlbar-toggle') whenever possible ...\n    if ($('.nav-item #controlbar-toggle')) {\n      $help_switch_container.insertBefore($('#controlbar-toggle').parent());\n    } else {\n      $navbar.append($help_switch_container);\n    }\n\n    // trigger first click, if necessary\n    $help_switch_checkbox.click();\n  }\n\n  // dark mode input\n  $(document).one('shiny:connected', function () {\n    if ($('body').hasClass('dark-mode')) {\n      Shiny.setInputValue('dark_mode', true, { priority: 'event' });\n    } else {\n      Shiny.setInputValue('dark_mode', false, { priority: 'event' });\n    }\n  });\n\n\n  // Navbar colors\n  getNavbarColor = function () {\n    for (let color of navbar_all_colors) {\n      if ($('.main-header').attr('class').search(color) > -1) {\n        return color;\n      }\n    }\n  };\n\n  var navbar_dark_skins = [\n    'navbar-primary',\n    'navbar-secondary',\n    'navbar-info',\n    'navbar-success',\n    'navbar-danger',\n    'navbar-indigo',\n    'navbar-purple',\n    'navbar-pink',\n    'navbar-maroon',\n    'navbar-fuchsia',\n    'navbar-navy',\n    'navbar-lightblue',\n    'navbar-lime',\n    'navbar-teal',\n    'navbar-olive',\n    'navbar-gray-dark',\n    'navbar-gray'\n  ];\n\n  var navbar_light_skins = [\n    'navbar-warning',\n    'navbar-white',\n    'navbar-orange'\n  ];\n\n  var navbar_all_colors = navbar_dark_skins.concat(navbar_light_skins);\n  // find navbar color\n  var navbarColor;\n\n  // automatic global theme switcher\n  if ($('body').attr('data-dark') == 2 || \n  $('body').attr('data-dark') == 1) {\n    var $dark_mode_checkbox = $('<input />', {\n      type: 'checkbox',\n      id: 'customSwitch1',\n      class: 'custom-control-input'\n    }).on('click', function () {\n\n      // get any selected navbar skin in the navbar themer\n      var newNavbarColor;\n      $('.navbar-themer-chip').filter(function () {\n        if ($(this).css('border-style') === 'solid') {\n          newNavbarColor = 'navbar-' +\n            $(this)\n              .attr('class')\n              .split('elevation-2')[0]\n              .trim()\n              .replace('bg-', '');\n        }\n      });\n\n      if ($(this).is(':checked')) {\n        $('body').addClass('dark-mode');\n\n        // use updateNavbarTheme to correctly setup the skin as depending\n        // on the required color. If no color is chosen, we use gray-dark for dark mode\n        if (newNavbarColor === undefined) {\n          newNavbarColor = \"navbar-gray-dark\";\n        }\n        updateNavbarTheme(newNavbarColor);\n\n        // sidebar update  \n        if ($('.main-sidebar').length > 0) {\n          $('.main-sidebar').attr('class', $('.main-sidebar')\n            .attr('class')\n            .replace('light', 'dark'));\n          $('#sidebar-skin').prop(\"checked\", true);\n\n          $('.sidebar-themer-icon')\n            .removeClass('fa-sun')\n            .addClass('fa-moon');\n        }\n\n        // controlbar update\n        if ($('.control-sidebar').length > 0) {\n          $('.control-sidebar').attr('class', $('.control-sidebar')\n            .attr('class')\n            .replace('light', 'dark'));\n          $('#controlbar-skin').prop(\"checked\", true);\n\n          $('.controlbar-themer-icon')\n            .removeClass('fa-sun')\n            .addClass('fa-moon');\n        }\n\n\n        $('.dark-theme-icon')\n          .removeClass('fa-sun')\n          .addClass('fa-moon');\n\n        // refresh shiny input value  \n        Shiny.setInputValue('dark_mode', true, { priority: 'event' });\n\n      } else {\n        $('body').removeClass('dark-mode');\n\n        // use updateNavbarTheme to correctly setup the skin as depending\n        // on the required color. If no color is chosen, we use white for light mode\n        if (newNavbarColor === undefined) {\n          newNavbarColor = \"navbar-white\";\n        }\n        updateNavbarTheme(newNavbarColor);\n\n        // sidebar update\n        if ($('.main-sidebar').length > 0) {\n          $('.main-sidebar').attr('class', $('.main-sidebar')\n            .attr('class')\n            .replace('dark', 'light'));\n          $('#sidebar-skin').prop(\"checked\", false);\n\n          $('.sidebar-themer-icon')\n            .removeClass('fa-moon')\n            .addClass('fa-sun');\n        }\n\n        // controlbar update\n        if ($('.control-sidebar').length > 0) {\n          $('.control-sidebar').attr('class', $('.control-sidebar')\n            .attr('class')\n            .replace('dark', 'light'));\n          $('#controlbar-skin').prop(\"checked\", false);\n\n          $('.controlbar-themer-icon')\n            .removeClass('fa-moon')\n            .addClass('fa-sun');\n        }\n\n        $('.dark-theme-icon')\n          .removeClass('fa-moon')\n          .addClass('fa-sun');\n\n        // refresh shiny input value  \n        Shiny.setInputValue('dark_mode', false, { priority: 'event' });\n      }\n    });\n\n    var $dark_mode_icon = $('body').hasClass('dark-mode') ? '<i class=\"dark-theme-icon fa fa-moon\"></i>' : '<i class=\"dark-theme-icon fa fa-sun\"></i>';\n    var $dark_mode_container = $('<div />', { class: 'custom-control custom-switch mx-2 mt-2' }).append($dark_mode_checkbox).append(`<label class=\"custom-control-label\" for=\"customSwitch1\">${$dark_mode_icon}</label>`);\n    \n    // insert before $('#controlbar-toggle') whenever possible ...\n    if ($('.nav-item #controlbar-toggle')) {\n      $dark_mode_container.insertBefore($('#controlbar-toggle').parent());\n    } else {\n      $navbar.append($dark_mode_container);\n    }\n    \n    \n    // Trigger dark mode\n    if ($('body').attr('data-dark') == 2) {\n      $(document).on('shiny:connected', function() {\n        $('#customSwitch1').click();\n      }); \n    }\n  }\n  \n\n  // Themer chips\n\n  // Better style on hover\n  $('.themer-chip').hover(function () {\n    $(this).css({ opacity: 1 }).removeClass('elevation-2').addClass('elevation-4');\n  }, function () {\n    $(this).css({ opacity: 0.8 }).removeClass('elevation-4').addClass('elevation-2');\n  });\n\n  // \n  $('.navbar-themer-chip').on('click', function () {\n    $(this).css({ 'border-color': 'yellow', 'border-style': 'solid' });\n    $('.navbar-themer-chip').not(this).css({ 'border-color': '', 'border-style': '' });\n  });\n\n  $('.accents-themer-chip').on('click', function () {\n    $(this).css({ 'border-color': 'yellow', 'border-style': 'solid' });\n    $('.accents-themer-chip').not(this).css({ 'border-color': '', 'border-style': '' });\n  });\n\n  $('.sidebar-themer-chip').on('click', function () {\n    $(this).css({ 'border-color': 'yellow', 'border-style': 'solid' });\n    $('.sidebar-themer-chip').not(this).css({ 'border-color': '', 'border-style': '' });\n  });\n\n\n  /**\n  * Update color theme to navbar tag\n  *\n  * @param String color Color to apply.\n  * @returns void\n  */\n  updateNavbarTheme = function (color) {\n    var $main_header = $('.main-header');\n    $main_header.removeClass('navbar-dark').removeClass('navbar-light');\n    navbar_all_colors.forEach(function (color) {\n      $main_header.removeClass(color);\n    });\n\n    if (navbar_dark_skins.indexOf(color) > -1) {\n      $main_header.addClass('navbar-dark');\n    } else {\n      $main_header.addClass('navbar-light');\n    }\n\n    $main_header.addClass(color);\n  };\n\n\n  // Sidebar themer\n\n  // detect global sidebar theme and select or not the toggle\n  if ($('.main-sidebar').length > 0) {\n    if ($('.main-sidebar').attr('class').match('dark')) {\n      $('#sidebar-skin').prop(\"checked\", true);\n    }\n  }\n\n  // clicking on dark/light switch changes:\n  // - icon style\n  // - sidebar class \n  $('#sidebar-skin').on('click', function () {\n    var sidebarCl;\n    if ($(this).is(':checked')) {\n      sidebarCl = $('.main-sidebar')\n        .attr('class')\n        .replace('light', 'dark');\n      $('.main-sidebar').attr('class', sidebarCl);\n\n      $('.sidebar-themer-icon')\n        .removeClass('fa-sun')\n        .addClass('fa-moon');\n    } else {\n      sidebarCl = $('.main-sidebar')\n        .attr('class')\n        .replace('dark', 'light');\n      $('.main-sidebar').attr('class', sidebarCl);\n\n      $('.sidebar-themer-icon')\n        .removeClass('fa-moon')\n        .addClass('fa-sun');\n    }\n  });\n\n  var sidebar_colors = [\n    'bg-primary',\n    'bg-secondary',\n    'bg-info',\n    'bg-success',\n    'bg-danger',\n    'bg-indigo',\n    'bg-purple',\n    'bg-pink',\n    'bg-maroon',\n    'bg-fuchsia',\n    'bg-navy',\n    'bg-lightblue',\n    'bg-lime',\n    'bg-teal',\n    'bg-olive',\n    'bg-gray-dark',\n    'bg-gray',\n    'bg-light',\n    'bg-warning',\n    'bg-white',\n    'bg-orange'\n  ];\n\n\n  var sidebar_skins = [\n    'sidebar-dark-primary',\n    'sidebar-dark-secondary',\n    'sidebar-dark-info',\n    'sidebar-dark-success',\n    'sidebar-dark-danger',\n    'sidebar-dark-indigo',\n    'sidebar-dark-purple',\n    'sidebar-dark-pink',\n    'sidebar-dark-maroon',\n    'sidebar-dark-fuchsia',\n    'sidebar-dark-navy',\n    'sidebar-dark-lightblue',\n    'sidebar-dark-lime',\n    'sidebar-dark-teal',\n    'sidebar-dark-olive',\n    'sidebar-dark-gray-dark',\n    'sidebar-dark-gray',\n    'sidebar-dark-light',\n    'sidebar-dark-warning',\n    'sidebar-dark-white',\n    'sidebar-dark-orange',\n    'sidebar-light-primary',\n    'sidebar-light-secondary',\n    'sidebar-light-info',\n    'sidebar-light-success',\n    'sidebar-light-danger',\n    'sidebar-light-indigo',\n    'sidebar-light-purple',\n    'sidebar-light-pink',\n    'sidebar-light-maroon',\n    'sidebar-light-fuchsia',\n    'sidebar-light-navy',\n    'sidebar-light-lightblue',\n    'sidebar-light-lime',\n    'sidebar-light-teal',\n    'sidebar-light-olive',\n    'sidebar-light-gray-dark',\n    'sidebar-light-gray',\n    'sidebar-light-light',\n    'sidebar-light-warning',\n    'sidebar-light-white',\n    'sidebar-light-orange'\n  ];\n\n\n  updateSidebarTheme = function (color) {\n    var sidebarCl;\n    if ($('#sidebar-skin').is(':checked')) {\n      sidebarCl = 'sidebar-dark-';\n    } else {\n      sidebarCl = 'sidebar-light-';\n    }\n\n    var sidebar_class = sidebarCl + color.replace('bg-', '');\n    var $sidebar = $('.main-sidebar');\n    sidebar_skins.forEach(function (skin) {\n      $sidebar.removeClass(skin);\n    });\n\n    $sidebar.addClass(sidebar_class);\n  };\n\n\n  // Accents themer\n  var accent_colors = [\n    'accent-primary',\n    'accent-secondary',\n    'accent-info',\n    'accent-success',\n    'accent-danger',\n    'accent-indigo',\n    'accent-purple',\n    'accent-pink',\n    'accent-maroon',\n    'accent-fuchsia',\n    'accent-navy',\n    'accent-lightblue',\n    'accent-lime',\n    'accent-teal',\n    'accent-olive',\n    'accent-gray-dark',\n    'accent-gray',\n    'accent-light',\n    'accent-warning',\n    'accent-white',\n    'accent-orange'\n  ];\n\n\n  updateAccentsTheme = function (color) {\n    var accent_class = color;\n    var $body = $('body');\n    accent_colors.forEach(function (skin) {\n      $body.removeClass(skin);\n    });\n\n    $body.addClass(accent_class);\n  };\n\n\n  // Controlbar themer\n\n  // detect global controlbar theme and select or not the toggle\n  if ($('.control-sidebar').length > 0) {\n    if ($('.control-sidebar').attr('class').match('dark')) {\n      $('#controlbar-skin').prop(\"checked\", true);\n    }\n  }\n\n  // clicking on dark/light switch changes:\n  // - icon style\n  // - sidebar class \n  $('#controlbar-skin').on('click', function () {\n    var controlbarCl;\n    if ($(this).is(':checked')) {\n      controlbarCl = $('.control-sidebar')\n        .attr('class')\n        .replace('light', 'dark');\n      $('.control-sidebar').attr('class', controlbarCl);\n\n      $('.controlbar-themer-icon')\n        .removeClass('fa-sun')\n        .addClass('fa-moon');\n    } else {\n      controlbarCl = $('.control-sidebar')\n        .attr('class')\n        .replace('dark', 'light');\n      $('.control-sidebar').attr('class', controlbarCl);\n\n      $('.controlbar-themer-icon')\n        .removeClass('fa-moon')\n        .addClass('fa-sun');\n    }\n  });\n\n});","$(function () {\n  // hide the right sidebar toggle \n  // if no right sidebar is specified\n  noControlbar = ($(\".control-sidebar\").length === 0);\n  if (noControlbar) {\n    $(\"#controlbar-toggle\").hide();\n  }\n\n  // hide the right sidebar toggle if the controlbar is disable\n  disableControlbar = ($(\".control-sidebar\").attr(\"data-show\"));\n  if (!disableControlbar) {\n    $(\"#controlbar-toggle\").hide();\n  }\n\n  // controlbar slide\n  controlbarSlide = ($(\".control-sidebar\").attr(\"data-slide\"));\n  if (controlbarSlide) {\n    $(\"#controlbar-toggle\").attr('data-controlsidebar-slide', controlbarSlide);\n  }\n\n  // when the sidebar is disabled, hide the sidebar toggle\n  disableSidebar = ($(\".main-sidebar\").length === 0);\n  if (disableSidebar) {\n    $(\".nav-item > a[data-widget='pushmenu']\").css(\"visibility\", \"hidden\");\n  }\n\n  // handle fixed navbar\n  if ($(\".navbar\").attr(\"data-fixed\") === \"true\") {\n    $(\"body\").addClass(\"layout-navbar-fixed\");\n  }\n\n});","var menuOutputBinding = new Shiny.OutputBinding();\n$.extend(menuOutputBinding, {\n  find: function (scope) {\n    return $(scope).find('.bs4Dash-menu-output');\n  },\n  onValueError: function (el, err) {\n    Shiny.unbindAll(el);\n    this.renderError(el, err);\n  },\n  renderValue: function (el, data) {\n    Shiny.unbindAll(el);\n\n    var html;\n    var dependencies = [];\n    if (data === null) {\n      return;\n    } else if (typeof (data) === 'string') {\n      html = data;\n    } else if (typeof (data) === 'object') {\n      html = data.html;\n      dependencies = data.deps;\n    }\n\n    var $html = $($.parseHTML(html));\n\n    // Convert the inner contents to HTML, and pass to renderHtml\n    Shiny.renderHtml($html.html(), el, dependencies);\n\n    // Extract class of wrapper, and add them to the wrapper element\n    el.className = 'bs4Dash-menu-output shiny-bound-output ' +\n      $html.attr('class');\n    \n    // need this to activate adminLTE3 plugin for treeview  \n    $(el)\n      .attr(\"data-widget\", \"treeview\")\n      .attr(\"role\", \"menu\")\n      .attr(\"data-accordion\", \"true\");\n\n    Shiny.initializeInputs(el);\n    Shiny.bindAll(el);\n    if ($(el).hasClass(\"sidebar-menu\")) ensureActivatedTab(); // eslint-disable-line\n  }\n});\nShiny.outputBindings.register(menuOutputBinding, \"bs4Dash.menuOutputBinding\");","var bootstrapTabInputBinding = new Shiny.InputBinding();\n$.extend(bootstrapTabInputBinding, {\n  find: function(scope) {\n    return $(scope).find('ul.nav.shiny-tab-input');\n  },\n  getValue: function(el) {\n    // for Bootstrap 4, li element does not hold the active class anymore!\n    // We need to look at a.active.\n    var anchor = $(el).find('li:not(.dropdown)').children('a.active');\n    if (anchor.length === 1)\n      return this._getTabName(anchor);\n\n    return null;\n  },\n  setValue: function(el, value) {\n    let self = this;\n    let success = false;\n    if (value) {\n      let anchors = $(el).find('li:not(.dropdown)').children('a');\n      anchors.each(function() {\n        if (self._getTabName($(this)) === value) {\n          $(this).tab('show');\n          success = true;\n          return false; // Break out of each()\n        }\n        return true;\n      });\n    }\n    if (!success) {\n      // This is to handle the case where nothing is selected, e.g. the last tab\n      // was removed using removeTab.\n      $(el).trigger(\"change\");\n    }\n  },\n  getState: function(el) {\n    return { value: this.getValue(el) };\n  },\n  receiveMessage: function(el, data) {\n    if (data.hasOwnProperty('value'))\n      this.setValue(el, data.value);\n  },\n  subscribe: function(el, callback) {\n    $(el).on('change shown.bootstrapTabInputBinding shown.bs.tab.bootstrapTabInputBinding', function(event) {\n      callback();\n    });\n  },\n  unsubscribe: function(el) {\n    $(el).off('.bootstrapTabInputBinding');\n  },\n  _getTabName: function(anchor) {\n    return anchor.attr('data-value') || anchor.text();\n  }\n});\n\nShiny.inputBindings.register(bootstrapTabInputBinding, 'shiny.bootstrapTabInput');","// This code creates acustom handler for userMessages\nShiny.addCustomMessageHandler(\"user-messages\", function(message) {\n  var id = message.id, action = message.action, content = message.body, index = message.index;\n  \n  // message text\n  // We use Shiny.renderHtml to handle the case where the user pass input/outputs in the updated content that require a new dependency not available in the \n  // page at startup. \n  if (content.hasOwnProperty(\"text\")) {\n    var text;\n    if (content.text.html === undefined) {\n      text = content.text;\n    } else {\n      text = Shiny.renderHtml(content.text.html, $([]), content.text.deps).html;\n    } \n  }\n  \n  // unbind all\n  Shiny.unbindAll();\n  \n  if (action === \"remove\") {\n    $(\"#\" + id).find(\".direct-chat-msg\").eq(index - 1).remove();\n  } else if (action === \"add\") {\n    var author = content.author, date = content.date, image = content.image, type = content.type;\n    \n    // build the new message \n    var authorWrapper, dateWrapper;\n    if (type === \"sent\") {\n      authorWrapper = '<span class=\"direct-chat-name float-right\">' + author + '</span>';\n      dateWrapper = '<span class=\"direct-chat-timestamp float-left\">' + date + '</span>';\n    } else {\n      authorWrapper = '<span class=\"direct-chat-name float-left\">' + author + '</span>';\n      dateWrapper = '<span class=\"direct-chat-timestamp float-right\">' + date + '</span>';\n    }\n\n    var newMessage = `<div class=\"direct-chat-infos clearfix\">${authorWrapper}${dateWrapper}</div><img class=\"direct-chat-img\" src=\"${image}\"/><div class=\"direct-chat-text\">${text}</div>`;\n        \n    // build wrapper\n    var newMessageWrapper;\n    if (type === \"sent\") {\n      newMessageWrapper = '<div class=\"direct-chat-msg right\">' + newMessage + '</div>';\n    } else {\n      newMessageWrapper = '<div class=\"direct-chat-msg\">' + newMessage + '</div>';\n    }\n      \n    // append message\n    $(\"#\" + id).find(\".direct-chat-messages\").append(newMessageWrapper);\n  } else if (action === \"update\") {\n      \n    // today's date\n    var d = new Date();\n    var month = d.getMonth() + 1;\n    var day = d.getDate();\n    var today = d.getFullYear() + '/' +\n      ((''+month).length<2 ? '0' : '') + month + '/' +\n      ((''+day).length<2 ? '0' : '') + day;\n      \n    // we assume only text may be updated. Does not make sense to modify author/date\n    \n    $(\"#\" + id)\n      .find(\".direct-chat-text\")\n      .eq(index - 1)\n      .replaceWith('<div class=\"direct-chat-text\"><small class=\"text-red\">(modified: ' + today +')</small><br>' +  text + '</div>');\n  }\n    \n  // Calls .initialize() for all of the input objects in all input bindings,\n  // in the given scope (document)\n  Shiny.initializeInputs();\n  Shiny.bindAll(); // bind all inputs/outputs\n});"]}
